(this["webpackJsonpnews-agregator"]=this["webpackJsonpnews-agregator"]||[]).push([[0],{13:function(e,t,n){e.exports={counter:"paginator_counter__2Ny5d",counter__item:"paginator_counter__item__3TBXy",active:"paginator_active__i5raR",btn:"paginator_btn__3WlLP"}},15:function(e,t,n){e.exports={news__paginator:"News_news__paginator__g13L_",news__wrapper:"News_news__wrapper__3GaEJ"}},21:function(e,t,n){e.exports={search:"Search_search__1SGap",search__wrapper:"Search_search__wrapper__1wepe",search__title:"Search_search__title__3CgU_"}},4:function(e,t,n){e.exports={news__inner:"NewsItem_news__inner__2TYaY",news__image:"NewsItem_news__image__37cky",news__author:"NewsItem_news__author__1xfAQ",news__source:"NewsItem_news__source__2kpP5",news__btn:"NewsItem_news__btn__3FeMm"}},6:function(e,t,n){e.exports={form__input:"SearchForm_form__input__esjOF",form__sort:"SearchForm_form__sort__12ezh",form__sort__text:"SearchForm_form__sort__text__3LYlW",form__sort__field:"SearchForm_form__sort__field__2fvGp",form__searchIn:"SearchForm_form__searchIn__3lPlB",form__searchIn__text:"SearchForm_form__searchIn__text__292mS",form__searchIn__field:"SearchForm_form__searchIn__field__2Swx4",form__button:"SearchForm_form__button__1zZ06"}},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var a=n(16),s=n.n(a),r=n(0),c=n.n(r),o=n.p+"static/media/preloader.a9c647ed.svg",i=n(1);var p=function(e){return Object(i.jsx)("img",{src:o,alt:"preloader"})},_=n(14);var u=function(e){return Object(i.jsx)("option",{value:e.text,children:e.text})},l=n(6),j=n.n(l);var h=function(e){var t=e.searchPage,n=t.sort.map((function(e){return Object(i.jsx)(u,{text:e.text},e.id)})),a=t.searchIn.map((function(e){return Object(i.jsx)(u,{text:e.text},e.id)}));return Object(i.jsx)(_.c,{initialValues:{text:"",sort:"Relevance",searchIn:"Everything"},onSubmit:function(t){e.setFormData(t),e.getNews(t,e.newsPage.currentPage,e.newsPage.pageSize)},children:Object(i.jsxs)(_.b,{className:j.a.form,children:[Object(i.jsx)(_.a,{className:j.a.form__input,name:"text"}),Object(i.jsxs)("div",{className:j.a.form__wrapper,children:[Object(i.jsxs)("div",{className:j.a.form__sort,children:[Object(i.jsx)("label",{className:j.a.form__sort__text,children:"Sorting by"}),Object(i.jsx)(_.a,{className:j.a.form__sort__field,name:"sort",as:"select",children:n})]}),Object(i.jsxs)("div",{className:j.a.form__searchIn,children:[Object(i.jsx)("label",{className:j.a.form__searchIn__text,children:"Search in"}),Object(i.jsx)(_.a,{className:j.a.form__searchIn__field,name:"searchIn",as:"select",children:a})]})]}),Object(i.jsx)("button",{className:j.a.form__button,type:"submit",children:"Submit"})]})})},d=n(21),g=n.n(d);var b=function(e){return Object(i.jsxs)("div",{className:g.a.search,children:[Object(i.jsxs)("div",{className:g.a.search__wrapper,children:[Object(i.jsx)("h1",{className:g.a.search__title,children:"Search news"}),Object(i.jsx)(h,{searchPage:e.searchPage,newsPage:e.newsPage,getNews:e.getNews,setFormData:e.setFormData})]}),void 0!==e.newsPage.news[0]?Object(i.jsx)("h3",{children:"Happy reading!"}):Object(i.jsx)("h3",{children:"...The news are almost here, it remains button"})]})},O=n(10),m=n(7),f=n(12),w=n.n(f),x=n(19),v=n(3),P=n(35).create({baseURL:"https://newsapi.org/v2/"}),N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,a="e17f513c62084bc18600e4a9d65c2abc";return P.get("".concat(e.searchIn,"?q=").concat(e.text,"&sortBy=").concat(e.sort,"&page=").concat(t,"&pageSize=").concat(n,"&apiKey=").concat(a))},S="SET_NEWS",y="SET_CURRENT_PAGE",F="TOGGLE_IS_FETCHING",I="SET_TOTAL_NEWS_COUNT",T={news:[],pageSize:20,totalNews:0,currentPage:1,isFetching:!1};var C=function(e){return{type:S,news:e}},D=function(e){return{type:I,totalNews:e}},E=function(e){return{type:F,isFetching:e}},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;return function(){var a=Object(x.a)(w.a.mark((function a(s){var r,c;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s(E(!0)),r=t>0?t++:0,a.next=4,N(e,r,n);case 4:c=a.sent,s(C(c.data.articles)),s(D(c.data.totalResults)),s(E(!1));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(v.a)(Object(v.a)({},e),{},{news:t.news});case y:return Object(v.a)(Object(v.a)({},e),{},{currentPage:t.currentPage});case F:return Object(v.a)(Object(v.a)({},e),{},{isFetching:t.isFetching});case I:return Object(v.a)(Object(v.a)({},e),{},{totalNews:t.totalNews});default:return e}},A="SET_FORM_DATA",R="GET_FORM_DATA",B={sort:[{id:1,text:"Relevance"},{id:2,text:"Popularity"},{id:3,text:"PublishedAt"}],searchIn:[{id:1,text:"Everything"},{id:2,text:"Top-headlines"}],formData:{text:"",sort:"Relevance",searchIn:"Everything"}};var G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:case R:return Object(v.a)(Object(v.a)({},e),{},{formData:t.formData});default:return e}},L=Object(m.c)(Object(O.b)((function(e){return{searchPage:e.searchPage,newsPage:e.newsPage}}),{getNews:k,setFormData:function(e){return{type:A,formData:e}}}))(b),U=n(36),M=n(37),W=n(42),J=n(40),Y=n(20),H=n(41),V=n(13),X=n.n(V),q=n(38),K=n.n(q),Q=function(e){for(var t=e.totalBooksCount,n=e.pageSize,a=e.currentPage,s=e.onPageChanged,c=e.portionSize,o=void 0===c?10:c,p=Math.ceil(t/n),_=[],u=1;u<=p-1;u++)_.push(u);var l=Math.ceil(p/o),j=Object(r.useState)(1),h=Object(H.a)(j,2),d=h[0],g=h[1],b=(d-1)*o+1,O=d*o;return Object(i.jsxs)("ul",{className:X.a.counter,children:[d>1&&Object(i.jsx)("button",{className:X.a.btn,onClick:function(){g(d-1)},children:"PREV"}),_.filter((function(e){return e>=b&&e<=O})).map((function(e){return Object(i.jsx)("span",{className:K()(Object(Y.a)({},X.a.active,a===e),X.a.counter__item),onClick:function(t){s(e)},children:e},e)})),l>d&&Object(i.jsx)("button",{className:X.a.btn,onClick:function(){g(d+1)},children:"NEXT"})]})},Z=n(4),$=n.n(Z),ee=function(e){var t=e.news,n=e.togglePopupOpen,a=e.isPopupOpen;return Object(i.jsx)("div",{className:$.a.news__wrapper,children:Object(i.jsxs)("div",{className:$.a.news__inner,children:[Object(i.jsx)("img",{className:$.a.news__image,src:t.urlToImage?t.urlToImage:null,alt:""}),Object(i.jsx)("div",{className:$.a.news__info,children:Object(i.jsxs)("div",{className:$.a.news__description,children:[Object(i.jsx)("h3",{className:$.a.news__title,children:t.title}),Object(i.jsx)("p",{className:$.a.news__title__description,children:t.description})]})}),Object(i.jsxs)("div",{className:$.a.news__bottom,children:[Object(i.jsx)("button",{className:$.a.news__btn,onClick:function(){n(t,!a)},children:"Show more"}),t.author?Object(i.jsx)("div",{className:$.a.news__author,children:Object(i.jsxs)("span",{children:["\u0410\u0432\u0442\u043e\u0440: ",t.author]})}):null,Object(i.jsxs)("div",{className:$.a.news__source,children:[Object(i.jsxs)("span",{className:$.a.news__source__name,children:["\u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a: ",t.source.name]}),Object(i.jsx)("span",{className:$.a.news__source__publishedData,children:t.publishedAt})]})]})]})})},te=n(15),ne=n.n(te);var ae=function(e){var t=e.news,n=e.onPageChanged,a=e.pageSize,s=e.totalBooksCount,r=e.currentPage,c=e.isFetching,o=e.isPopupOpen,_=e.togglePopupOpen;return Object(i.jsxs)("div",{children:[s>0?Object(i.jsxs)("div",{children:[Object(i.jsxs)("h2",{className:ne.a.news__total,children:["Total news we found: ",s]}),Object(i.jsx)("div",{className:ne.a.news__paginator,children:Object(i.jsx)(Q,{currentPage:r,onPageChanged:n,totalBooksCount:s,pageSize:a})})]}):null,Object(i.jsx)("div",{className:ne.a.news__wrapper,children:c?Object(i.jsx)(p,{}):void 0!==t?t.map((function(e,t){return Object(i.jsx)(ee,{news:e,isPopupOpen:o,togglePopupOpen:_},t)})):Object(i.jsx)("span",{className:ne.a.error,children:"News is gone (try again)"})})]})},se="SET_POPUP_DATA",re="TOOGLE_POPUP_OPEN",ce={popupData:{},isPopupOpen:!1};var oe=function(e){return{type:se,popupData:e}},ie=function(e){return{type:re,isPopupOpen:e}},pe=function(e,t){return function(){var n=Object(x.a)(w.a.mark((function n(a){return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a(oe(e)),a(ie(t));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:return Object(v.a)(Object(v.a)({},e),{},{popupData:t.popupData});case re:return Object(v.a)(Object(v.a)({},e),{},{isPopupOpen:t.isPopupOpen});default:return e}},ue=function(e){return e.newsPage.news},le=function(e){return e.newsPage.pageSize},je=function(e){return e.newsPage.totalNews},he=function(e){return e.newsPage.currentPage},de=function(e){return e.newsPage.isFetching},ge=function(e){return e.searchPage.formData},be=function(e){Object(W.a)(n,e);var t=Object(J.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).onPageChanged=function(t){e.props.setCurrentPage(t),e.props.getNews(e.props.formData,t,e.props.pageSize)},e}return Object(M.a)(n,[{key:"render",value:function(){return Object(i.jsx)(i.Fragment,{children:this.props.isFetching?Object(i.jsx)(p,{}):Object(i.jsx)(ae,{news:this.props.news,pageSize:this.props.pageSize,onPageChanged:this.onPageChanged,totalBooksCount:this.props.totalBooksCount,currentPage:this.props.currentPage,isFetching:this.props.isFetching,isPopupOpen:this.props.isPopupOpen,togglePopupOpen:this.props.togglePopupOpen})})}}]),n}(c.a.Component),Oe=Object(m.c)(Object(O.b)((function(e){return{news:ue(e),pageSize:le(e),totalBooksCount:je(e),currentPage:he(e),isFetching:de(e),formData:ge(e),isPopupOpen:e.popupPage.isPopupOpen,togglePopupOpen:pe}}),{getNews:k,setCurrentPage:function(e){return{type:y,currentPage:e}},setPopupData:oe,togglePopupOpen:pe}))(be),me=(n(72),function(e){var t=e.popupPage,n=e.popupPage.popupData;return Object(i.jsx)("div",{children:void 0!==n?Object(i.jsx)("div",{className:"popup ".concat(t.isPopupOpen?"open":"close"),children:Object(i.jsxs)("div",{className:"popup__body",children:[Object(i.jsx)("div",{className:"popup__close",onClick:function(){e.togglePopupOpen(!t.isPopupOpen)},children:"\xd7"}),Object(i.jsx)("h3",{children:n.title}),Object(i.jsx)("img",{className:"popup__image",src:n.urlToImage?n.urlToImage:null,alt:""}),Object(i.jsx)("p",{className:"popup__content",children:n.content}),Object(i.jsx)("div",{className:"news__source",children:Object(i.jsx)("span",{className:"news__source__publishedData",children:n.publishedAt})}),Object(i.jsx)("div",{className:"popup__authors",children:n.source?Object(i.jsxs)("span",{children:["\u0410\u0432\u0442\u043e\u0440\u044b: ",n.source.name]}):null}),Object(i.jsxs)("div",{children:[Object(i.jsx)("span",{children:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a: "}),Object(i.jsx)("a",{href:n.url,className:"news__link",children:n.url})]})]})}):null})}),fe=Object(m.c)(Object(O.b)((function(e){return{popupPage:e.popupPage}}),{setPopupData:oe,togglePopupOpen:pe}))(me);n(73);var we=function(e){return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)(fe,{}),Object(i.jsx)(L,{}),Object(i.jsx)(r.Suspense,{fallback:Object(i.jsx)(p,{}),children:Object(i.jsx)("div",{className:"content",children:Object(i.jsx)(Oe,{})})})]})},xe=n(39),ve=Object(m.b)({newsPage:z,searchPage:G,popupPage:_e}),Pe=Object(m.d)(ve,Object(m.a)(xe.a));n(74);s.a.render(Object(i.jsx)(O.a,{store:Pe,children:Object(i.jsx)(we,{})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.7cd666b5.chunk.js.map